# 项目概述

## 项目简介

Legends-Of-Heroes 是基于Unity + .NET 8 开源游戏框架ET8.0构建的大型多人在线游戏项目。项目采用客户端服务端双端C#统一开发模式，支持完整的热更新机制、分布式架构和高性能网络通信。

## 技术栈

### 核心技术
- **Unity版本**: Unity 6000.3.34
- **.NET版本**: .NET 8
- **框架**: ET8.0
- **热更新**: HybridCLR + YooAsset
- **配置系统**: Luban
- **网络协议**: Protocol Buffers (Proto)
- **序列化**: MemoryPack + MongoBson

### 依赖库
- **MongoDB**: 数据持久化
- **NLog**: 日志系统
- **KCP**: 可靠UDP传输
- **Recast**: 导航网格系统
- **Odin Inspector**: Unity编辑器增强

## 项目架构

### 程序集分层

```
ET.HotfixView (UI热更新层)
    ↓
ET.Hotfix (逻辑热更新层)
    ↓
ET.ModelView (UI模型层)
    ↓
ET.Model (游戏逻辑模型层)
    ↓
ET.Loader (加载器和启动层)
    ↓
ET.Core (框架核心层)
```

### 目录结构

```
Legends-Of-Heroes/
├── Bin/                      # 编译输出目录
├── Book/                     # 开发文档和教程
├── Config/                   # 配置文件
│   ├── Excel/               # Excel配置
│   ├── Json/                # JSON配置
│   └── NLog/                # 日志配置
├── Document/                 # 策划文档、截图等
├── Dotnet/                   # 服务端代码目录
│   ├── App/                 # 应用程序入口
│   ├── Core/                # 核心库
│   ├── Hotfix/              # 热更新代码
│   ├── Loader/              # 加载器
│   ├── Model/               # 模型层
│   └── ThirdParty/          # 第三方库
├── Share/                    # 公共代码库
│   ├── Analyzer/            # 分析器
│   ├── Libs/                # 原生库
│   ├── Share.SourceGenerator/ # 源码生成器
│   └── Tool/                # 工具
├── Tools/                    # 外部工具
│   ├── Config/              # 配置工具
│   ├── Luban/               # 配置生成工具
│   └── RecastNavExportor/   # 导航导出工具
└── Unity/                    # Unity工程目录
    ├── Assets/
    │   ├── Bundles/         # 资源包
    │   ├── Config/          # 配置文件
    │   ├── Plugins/         # 插件
    │   ├── Res/             # 资源文件
    │   ├── Scenes/          # 场景文件
    │   └── Scripts/         # 游戏逻辑代码
    │       ├── Core/        # 核心框架
    │       ├── Editor/      # 编辑器脚本
    │       ├── Hotfix/      # 热更新代码
    │       ├── HotfixView/  # UI热更新代码
    │       ├── Loader/      # 加载器
    │       ├── Model/       # 模型层
    │       └── ModelView/   # UI模型层
    └── Packages/            # Unity包
```

## 核心特性

### 1. ECS架构
- Entity: 所有游戏对象的基类
- Component: 数据组件，纯数据无逻辑
- System: 逻辑系统，通过静态扩展方法实现

### 2. Fiber/Actor模型
- 单线程异步编程
- 分布式Actor通信
- 消息驱动架构

### 3. 热更新机制
- **代码热更**: 基于HybridCLR，支持C#代码运行时更新
- **资源热更**: 基于YooAsset，支持资源增量更新
- **配置热更**: 基于Luban配置系统，支持配置实时更新

### 4. 网络通信
- 支持TCP、KCP、WebSocket多种协议
- 统一的消息系统
- 自动序列化和反序列化

### 5. 配置系统
- Excel配置管理
- 支持多种数据类型
- 实时配置更新

## 开发环境要求

### 必需工具
- Unity 6000.3.34
- .NET 8 SDK
- PowerShell
- Git

### 重要提醒
1. 开发过程需要全局翻墙访问GitHub Package和NuGet
2. 运行服务器需要管理员权限
3. 新手必须使用指定Unity版本
4. 必须clone全新工程，不要使用已有工程

## 快速开始

### 编译项目
```powershell
pwsh -Command "dotnet build ET.sln"
```

### 启动服务器
```powershell
pwsh -Command "dotnet Bin/ET.App.dll --Console=1"
```

### 运行Unity客户端
1. 打开Unity工程
2. 打开Init场景
3. 点击Play运行

## 相关文档

- [ECS架构](ECS架构.md)
- [Fiber模块](Fiber模块.md)
- [热更新机制](热更新机制.md)
- [网络通信模块](网络通信模块.md)
- [服务端模块](服务端模块.md)
- [客户端模块](客户端模块.md)
- [工具模块](工具模块.md)
